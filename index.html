<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Khiva Math - Grand Edu</title>

  <!-- Bootstrap & AOS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#f6fbff;
      --card:#ffffff;
      --accent:#4a9eff;
      --accent-2:#8bd3eff;
      --muted:#6b7b8a;
      --glass: rgba(255,255,255,0.6);
      --radius:16px;
    }
    *{box-sizing:border-box;}
    body{
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(138,215,255,0.08), transparent 8%),
                  radial-gradient(1000px 500px at 90% 90%, rgba(74,158,255,0.06), transparent 6%),
                  var(--bg);
      color:#0f1b2a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      scroll-behavior:smooth;
    }

    /* NAV */
    .navbar{
      background: rgba(255,255,255,0.7);
      backdrop-filter: blur(6px);
      border-bottom: 1px solid rgba(15,27,42,0.04);
      transition: all .25s ease;
    }
    .navbar.scrolled{
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#fff;
      box-shadow: 0 8px 30px rgba(74,158,255,0.12);
    }
    .navbar.scrolled .nav-link{ color:#fff !important; }
    .navbar.scrolled .brand { color:#fff; }
    .navbar.scrolled .social-icons a { color:#fff; }
    
    .brand {
      display:flex; gap:.6rem; align-items:center; font-weight:800; letter-spacing:.3px;
      color:var(--accent);
    }
    .brand img{ width:40px; height:40px; object-fit:cover; border-radius:8px; box-shadow:0 6px 20px rgba(74,158,255,0.12); }

    .social-icons {
      display: flex;
      gap: 12px;
      margin-left: 1rem;
    }
    .social-icons a {
      color: var(--muted);
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }
    .social-icons a:hover {
      color: var(--accent);
      transform: translateY(-2px);
    }

    /* HERO */
    .hero{
      padding:110px 0 80px;
      text-align:center;
    }
    .hero .kicker{ color:var(--accent); font-weight:700; letter-spacing:.6px; }
    .hero h1{ font-size:2.6rem; font-weight:800; margin:.5rem 0; line-height:1.05; }
    .hero p.lead{ color:var(--muted); font-size:1.05rem; max-width:900px; margin:0 auto 1.2rem; }

    .btn-cta{
      background: linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#fff; border-radius:999px; padding:12px 26px; font-weight:700;
      box-shadow: 0 12px 30px rgba(74,158,255,0.18);
      border: none;
      text-decoration: none;
      display: inline-block;
    }
    .btn-cta:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 40px rgba(74,158,255,0.25);
      color: #fff;
    }

    /* LAYOUT */
    section{ padding:70px 0; }
    .card-modern{
      background:var(--card);
      border-radius:var(--radius);
      border:1px solid rgba(15,27,42,0.04);
      box-shadow: 0 8px 30px rgba(12,20,32,0.04);
      padding:22px;
    }

    /* ADMIN PANEL */
    .admin-panel {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: var(--radius);
      padding: 2rem;
      margin: 2rem 0;
    }
    .admin-login {
      background: rgba(255,255,255,0.95);
      border-radius: 12px;
      padding: 2rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    .admin-box{ 
      background: linear-gradient(180deg, rgba(250,250,255,0.95), #fff); 
      border: 2px dashed rgba(74,158,255,0.3); 
      padding: 2rem; 
      border-radius:12px; 
      margin: 1rem 0;
    }
    .certificate-form .form-control {
      border-radius: 8px;
      border: 1px solid rgba(74,158,255,0.2);
      padding: 12px;
    }
    .file-upload {
      border: 2px dashed #dee2e6;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .file-upload:hover {
      border-color: var(--accent);
      background: rgba(74,158,255,0.05);
    }
    .file-upload i {
      font-size: 2rem;
      color: var(--accent);
      margin-bottom: 10px;
    }
    .file-preview {
      max-width: 200px;
      max-height: 150px;
      border-radius: 8px;
      margin-top: 10px;
    }

    /* CERTIFICATE GRID - NO WHITE SPACES */
    .certificate-card {
      transition: all 0.3s ease;
      border-radius: 12px;
      overflow: hidden;
      height: 100%;
    }
    .certificate-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
    }
    .certificate-image-container {
      width: 100%;
      height: 280px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f8f9fa;
      position: relative;
    }
    .certificate-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      background: white;
    }
    .certificate-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--accent);
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      z-index: 2;
    }

    /* TEACHER CARDS - FULL PHOTO COVER */
    .teacher-card {
      transition: all 0.3s ease;
      border-radius: 16px;
      overflow: hidden;
      height: 100%;
      border: none;
    }
    .teacher-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }
    .teacher-img-container {
      width: 100%;
      height: 320px;
      overflow: hidden;
      position: relative;
    }
    .teacher-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    .teacher-card:hover .teacher-img {
      transform: scale(1.05);
    }
    .teacher-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0,0,0,0.7));
      color: white;
      padding: 20px;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }
    .teacher-card:hover .teacher-overlay {
      transform: translateY(0);
    }

    /* RESPONSIVE */
    @media (max-width:768px){
      .hero h1{ font-size:1.8rem; }
      .hero { padding: 90px 0 60px; }
      .social-icons {
        margin-left: 0;
        margin-top: 1rem;
        justify-content: center;
      }
      .certificate-image-container {
        height: 250px;
      }
      .teacher-img-container {
        height: 280px;
      }
    }

    /* UTILITY CLASSES */
    .muted{ color:var(--muted); font-weight:500; }
    
    /* Navbar toggler fix */
    .navbar-toggler { border: none; padding: 4px 8px; }
    .navbar-toggler:focus { box-shadow: none; }

    /* Footer social icons */
    .footer-social {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 1rem 0;
    }
    .footer-social a {
      color: var(--muted);
      font-size: 1.5rem;
      transition: all 0.3s ease;
    }
    .footer-social a:hover {
      color: var(--accent);
      transform: translateY(-3px);
    }
  </style>
</head>
<body>

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
      <a class="brand" href="#home">
        <img src="logo.png" alt="Khiva Math logo" onerror="this.style.display='none'">
        <span>Khiva Math</span>
      </a>

      <!-- Social Media Icons in Navbar -->
      <div class="social-icons d-none d-md-flex">
        <a href="#" title="Telegram"><i class="fab fa-telegram"></i></a>
        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>
      </div>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-end" id="navMenu">
        <ul class="navbar-nav align-items-lg-center">
          <li class="nav-item"><a class="nav-link" href="#home">Bosh sahifa</a></li>
          <li class="nav-item"><a class="nav-link" href="#courses">Kurslar</a></li>
          <li class="nav-item"><a class="nav-link" href="#teachers">O'qituvchilar</a></li>
          <li class="nav-item"><a class="nav-link" href="#results">Natijalar</a></li>
          <li class="nav-item"><a class="nav-link" href="#videos">Video Darslar</a></li>
          <li class="nav-item"><a class="nav-link" href="#admin">Admin</a></li>
          <li class="nav-item ms-3"><a class="btn btn-sm btn-cta" href="#contact">Murojaat</a></li>
        </ul>

        <!-- Social Media Icons for Mobile -->
        <div class="social-icons d-flex d-md-none justify-content-center mt-3">
          <a href="#" title="Telegram"><i class="fab fa-telegram"></i></a>
          <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
          <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>
        </div>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header id="home" class="hero">
    <div class="container" data-aos="fade-up">
      <div class="kicker">Grand-Edu o'quv markazi</div>
      <h1>Khiva Math</h1>
      <p class="lead">MATEMATIKAni biz bilan chuqur oʻrganib oligohlarga grant asosida talaba boʻling.</p>
      <div class="d-flex justify-content-center gap-3 mt-4 flex-wrap">
        <a class="btn btn-cta" href="#results">Natijalarni ko'rish</a>
        <a class="btn btn-outline-primary" href="#courses">Kurslar haqida</a>
      </div>
    </div>
  </header>

  <!-- COURSES -->
  <section id="courses">
    <div class="container">
      <div class="row align-items-center mb-4">
        <div class="col-lg-6" data-aos="fade-right">
          <h2 class="mb-2">Bizda mavjud guruhlar</h2>
        </div>
      </div>

      <div class="row g-4">
        <div class="col-md-6 col-lg-4" data-aos="zoom-in">
          <div class="card-modern course-card h-100">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <h5 class="mb-1">To'plam_1996-2007 boshidan boshlamoqchi bo'lganlar uchun</h5>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-4" data-aos="zoom-in" data-aos-delay="80">
          <div class="card-modern course-card h-100">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <h5 class="mb-1">Nol dan o'rganuvchi o'quvchilar uchun</h5>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-4" data-aos="zoom-in" data-aos-delay="160">
          <div class="card-modern course-card h-100">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <h5 class="mb-1">Sertifikat guruhlar</h5>
                <div class="muted">Milliy sertifikat DEKABR oyi uchun</div>
                <div class="muted">Milliy sertifikat FEVRAL oyi uchun</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TEACHERS - IMPROVED CARDS -->
  <section id="teachers" class="py-5 bg-light">
    <div class="container">
      <div class="text-center mb-5">
        <h2 class="mb-3">Bizning o'qituvchilarimiz</h2>
      </div>

      <div class="row g-4 justify-content-center">
        <!-- Teacher 1 Card -->
        <div class="col-md-6 col-lg-5" data-aos="fade-up">
          <div class="card teacher-card shadow-sm">
            <div class="teacher-img-container">
              <img src="teachers.jpg" class="teacher-img" alt="Sadulla Otayev" onerror="this.src='https://via.placeholder.com/400x320/4a9eff/ffffff?text=Sadulla+Otayev'">
              <div class="teacher-overlay">
                <h5 class="mb-1">Sadulla Otayev</h5>
                <p class="mb-0">Matematika o'qituvchisi</p>
              </div>
            </div>
            <div class="card-body text-center p-4">
              <h4 class="card-title mb-2">Sadulla Otayev</h4>
              <p class="text-primary mb-3">Asoschi, Matematika o'qituvchisi</p>
              <p class="card-text text-muted">
                "GRAND EDU KHIVA" o'quv markazi asoschisi va 2020-yildan beri 
                MATEMATIKA fanidan ripetitorlik faoliyatini olib kelayotgan ustoz! 
                MILLIY SERTIFIKAT imtihonida 5 marta qatnashib barchasida 100% lik 
                [A+] daraja sohibi.
              </p>
              <div class="mt-3">
                <span class="badge bg-primary me-2">A+ Daraja</span>
                <span class="badge bg-success">5 ta Sertifikat</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Teacher 2 Card -->
        <div class="col-md-6 col-lg-5" data-aos="fade-up" data-aos-delay="100">
          <div class="card teacher-card shadow-sm">
            <div class="teacher-img-container">
              <img src="photo_2025-10-23_11-32-46.jpg" class="teacher-img" alt="Xayrulla Otaboyev" onerror="this.src='https://via.placeholder.com/400x320/4a9eff/ffffff?text=Xayrulla+Otaboyev'">
              <div class="teacher-overlay">
                <h5 class="mb-1">Xayrulla Otaboyev</h5>
                <p class="mb-0">Matematika o'qituvchisi</p>
              </div>
            </div>
            <div class="card-body text-center p-4">
              <h4 class="card-title mb-2">Xayrulla Otaboyev</h4>
              <p class="text-primary mb-3">Matematika o'qituvchisi</p>
              <p class="card-text text-muted">
                Matematika fani o'qituvchisi, o'quv markazimizda 2021-yildan buyon 
                ripetitorlik faoliyatini olib kelayotgan ustoz! MILLIY SERTIFIKAT 
                natijasi 100% lik A daraja sohib.
              </p>
              <div class="mt-3">
                <span class="badge bg-primary me-2">A Daraja</span>
                <span class="badge bg-success">3 yillik tajriba</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- RESULTS - CERTIFICATES -->
  <section id="results" class="py-5">
    <div class="container">
      <div class="text-center mb-5">
        <h2 class="mb-3">O'quvchilarimiz natijalari</h2>
        <p class="text-muted">Bizning faxrli o'quvchilarimizning so'nggi yutuqlari</p>
      </div>

      <div id="certificatesGrid" class="row g-4">
        <!-- Certificates will be loaded dynamically from JavaScript -->
      </div>
    </div>
  </section>

  <!-- YOUTUBE VIDEO LESSONS -->
  <section id="videos" class="py-5 bg-light">
    <div class="container">
      <div class="text-center mb-5">
        <h2 class="mb-3">YouTube darslarimiz</h2>
        <p class="text-muted">Bizning bepul matematika dars videolari</p>
      </div>

      <div id="ytList" class="row justify-content-center g-4">
        <!-- video list populated by JS -->
      </div>
      
      <div class="text-center mt-5">
        <a href="https://www.youtube.com/@GrandEdu_Khiva" target="_blank" class="btn btn-outline-primary">
          <i class="fab fa-youtube me-2"></i>YouTube kanalimizga obuna bo'ling
        </a>
      </div>
    </div>
  </section>

  <!-- ADMIN PANEL - PROTECTED -->
  <section id="admin" class="py-5">
    <div class="container">
      <div class="text-center mb-5">
        <h2 class="mb-3">Admin Panel</h2>
        <p class="text-muted">Faqat admin uchun</p>
      </div>

      <!-- Admin Login -->
      <div id="adminLogin" class="row justify-content-center">
        <div class="col-md-6">
          <div class="admin-login text-center">
            <h4 class="mb-4">Admin Kirish</h4>
            <form id="loginForm">
              <div class="mb-3">
                <input type="password" class="form-control" id="adminPassword" placeholder="Parolni kiriting" required>
              </div>
              <button type="submit" class="btn btn-cta w-100">Kirish</button>
            </form>
          </div>
        </div>
      </div>

      <!-- Admin Content (Hidden by default) -->
      <div id="adminContent" class="d-none">
        <div class="admin-box">
          <h4 class="mb-4">Yangi sertifikat qo'shish</h4>
          <form id="certificateForm" class="certificate-form">
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">Ism</label>
                <input type="text" class="form-control" id="studentName" required>
              </div>
              <div class="col-md-6">
                <label class="form-label">Familiya</label>
                <input type="text" class="form-control" id="studentLastName" required>
              </div>
              <div class="col-md-6">
                <label class="form-label">Sertifikat Darajasi</label>
                <select class="form-control" id="certificateGrade" required>
                  <option value="A+">A+ (100%)</option>
                  <option value="A">A (95-99%)</option>
                  <option value="B+">B+ (90-94%)</option>
                  <option value="B">B (85-89%)</option>
                  <option value="C+">C+ (80-84%)</option>
                  <option value="C">C (70-79%)</option>
                </select>
              </div>
              <div class="col-md-6">
                <label class="form-label">Foiz</label>
                <input type="number" class="form-control" id="percentage" step="0.01" required>
              </div>
              <div class="col-12">
                <label class="form-label">Sertifikat rasmi</label>
                <div class="file-upload" id="fileUploadArea">
                  <i class="fas fa-cloud-upload-alt"></i>
                  <p class="mb-2">Rasmni yuklash uchun bosing yoki sudrab keling</p>
                  <small class="text-muted">PNG, JPG (Max: 5MB)</small>
                  <input type="file" id="certificateImage" accept="image/*" class="d-none">
                  <div id="imagePreview" class="d-none">
                    <img id="previewImage" class="file-preview" src="" alt="Preview">
                  </div>
                </div>
              </div>
              <div class="col-12">
                <button type="submit" class="btn btn-cta w-100">
                  <i class="fas fa-plus me-2"></i>Sertifikat Qo'shish
                </button>
              </div>
            </div>
          </form>
        </div>

        <div class="mt-5">
          <h4 class="mb-3">Mavjud Sertifikatlar</h4>
          <div id="adminCertificatesList" class="row g-3">
            <!-- Admin certificate list will be populated here -->
          </div>
        </div>

        <div class="text-center mt-4">
          <button class="btn btn-outline-secondary" onclick="logoutAdmin()">
            <i class="fas fa-sign-out-alt me-2"></i>Chiqish
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT SECTION -->
  <section id="contact" class="py-5 bg-light">
    <div class="container">
      <div class="text-center mb-5">
        <h2 class="mb-3">Bog'lanish</h2>
        <p class="text-muted">Biz bilan bog'laning va bepul konsultatsiya oling</p>
      </div>
      
      <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
          <div class="card shadow-sm rounded-lg p-4">
            <h4 class="mb-4">Ma'lumot qoldiring</h4>
            <form id="contactForm">
              <div class="mb-3">
                <label for="name" class="form-label">Ismingiz</label>
                <input type="text" class="form-control" id="name" required>
              </div>
              <div class="mb-3">
                <label for="phone" class="form-label">Telefon raqamingiz</label>
                <input type="tel" class="form-control" id="phone" required>
              </div>
              <div class="mb-3">
                <label for="message" class="form-label">Xabar</label>
                <textarea class="form-control" id="message" rows="3"></textarea>
              </div>
              <button type="submit" class="btn btn-cta w-100">Yuborish</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-dark text-light py-5">
    <div class="container text-center">
      <div class="mb-3">
        <h4 class="text-white">Khiva Math</h4>
        <p class="text-muted">Matematika markazi • Xiva</p>
      </div>
      
      <!-- Footer Social Icons -->
      <div class="footer-social">
        <a href="#" title="Telegram"><i class="fab fa-telegram"></i></a>
        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>
      </div>
      
      <div class="text-muted mt-3">
        © <span id="year"></span> Khiva Math. Barcha huquqlar himoyalangan.
      </div>
    </div>
  </footer>

  <!-- Modal -->
  <div class="modal fade" id="ytModal" tabindex="-1" aria-labelledby="ytTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="ytTitle"></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="ytBody"></div>
      </div>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>

  <script>
    // Initialize AOS
    AOS.init({ duration: 800, once: true });

    // Navbar scroll effect
    const navbar = document.querySelector('.navbar');
    window.addEventListener('scroll', ()=>{
      if(window.scrollY > 40) navbar.classList.add('scrolled'); 
      else navbar.classList.remove('scrolled');
    });

    // Set current year
    document.getElementById('year').innerText = new Date().getFullYear();

    // YouTube functions
    function showYT(url, title){
      const videoId = extractYT(url);
      document.getElementById('ytTitle').innerText = title + ' Dars';
      document.getElementById('ytBody').innerHTML = videoId
        ? `<div style="position:relative;padding-bottom:56.25%;height:0">
             <iframe src="https://www.youtube.com/embed/${videoId}" style="position:absolute;left:0;top:0;width:100%;height:100%;" frameborder="0" allowfullscreen></iframe>
           </div>`
        : `<a href="${url}" target="_blank">Video link</a>`;
      const modal = new bootstrap.Modal(document.getElementById('ytModal'));
      modal.show();
    }
    
    function extractYT(url){
      try{
        const u = new URL(url.trim());
        if(u.hostname.includes('youtu.be')) return u.pathname.slice(1);
        if(u.searchParams.get('v')) return u.searchParams.get('v');
        const seg = u.pathname.split('/').pop();
        return seg || null;
      }catch(e){ return null; }
    }

    const ytLessons = [
      { title: "1,2,3 kitoblar bo'yicha darsliklar", url: "https://www.youtube.com/watch?v=914arSmP9Yo&list=PLKfWdQtJb-obCkkR4v_wL7GqlQSvpPeOn" },
      { title: "To'plam 1996-2007 yechimlari", url: "https://www.youtube.com/watch?v=h1Kj0w5Bh2U&list=PLKfWdQtJb-oYz4la8icidqoKsH92BduBS" },
      { title: "Milliy sertifikat", url: "https://www.youtube.com/watch?v=aODGxYAxgdQ&list=PLKfWdQtJb-oYW5iO4JdoosqXDkvPKR9bE" },
      { title: "Attestasiya", url: "https://www.youtube.com/watch?v=1ZfMlxVseNY&list=PLKfWdQtJb-oboF_OF2Le7MMY6P6RDdg6-" },
    ];

    function renderYT(){
      const c = document.getElementById('ytList');
      c.innerHTML = ytLessons.map((v,i)=>`
        <div class="col-md-6 col-lg-3" data-aos="zoom-in" data-aos-delay="${i*80}">
          <div class="card-modern yt-thumb h-100">
            <div style="position:relative; padding-bottom:56.25%; height:0;">
              <iframe src="https://www.youtube.com/embed/${extractYT(v.url)}" style="position:absolute;left:0;top:0;width:100%;height:100%;" frameborder="0" allowfullscreen></iframe>
            </div>
            <div class="mt-2 p-2">
              <strong>${v.title}</strong>
              <div class="mt-2 d-flex gap-2 flex-wrap">
                <button class="btn btn-sm btn-cta" onclick="showYT('${v.url}','${v.title}')">Tomosha qilish</button>
                <a class="btn btn-sm btn-outline-secondary" href="${v.url}" target="_blank">YouTube</a>
              </div>
            </div>
          </div>
        </div>
      `).join('');
    }

    // ADMIN AUTHENTICATION
    const ADMIN_PASSWORD = "khiva2024"; // Change this password
    
    function checkAdminAuth() {
      return localStorage.getItem('adminAuthenticated') === 'true';
    }

    function loginAdmin(event) {
      event.preventDefault();
      const password = document.getElementById('adminPassword').value;
      
      if (password === ADMIN_PASSWORD) {
        localStorage.setItem('adminAuthenticated', 'true');
        showAdminContent();
        alert('Admin paneliga muvaffaqiyatli kirdingiz!');
      } else {
        alert('Noto\'g\'ri parol!');
      }
    }

    function logoutAdmin() {
      localStorage.removeItem('adminAuthenticated');
      hideAdminContent();
      alert('Admin panelidan chiqdingiz!');
    }

    function showAdminContent() {
      document.getElementById('adminLogin').classList.add('d-none');
      document.getElementById('adminContent').classList.remove('d-none');
      renderCertificates(); // Re-render to show admin controls
    }

    function hideAdminContent() {
      document.getElementById('adminLogin').classList.remove('d-none');
      document.getElementById('adminContent').classList.add('d-none');
      document.getElementById('loginForm').reset();
    }

    // Check if already logged in
    if (checkAdminAuth()) {
      showAdminContent();
    }

    // FILE UPLOAD FUNCTIONALITY
    const fileUploadArea = document.getElementById('fileUploadArea');
    const certificateImageInput = document.getElementById('certificateImage');
    const imagePreview = document.getElementById('imagePreview');
    const previewImage = document.getElementById('previewImage');

    fileUploadArea.addEventListener('click', () => {
      certificateImageInput.click();
    });

    fileUploadArea.addEventListener('dragover', (e) => {
      e.preventDefault();
      fileUploadArea.style.borderColor = '#4a9eff';
      fileUploadArea.style.background = 'rgba(74,158,255,0.1)';
    });

    fileUploadArea.addEventListener('dragleave', () => {
      fileUploadArea.style.borderColor = '#dee2e6';
      fileUploadArea.style.background = '';
    });

    fileUploadArea.addEventListener('drop', (e) => {
      e.preventDefault();
      fileUploadArea.style.borderColor = '#dee2e6';
      fileUploadArea.style.background = '';
      
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        certificateImageInput.files = files;
        handleImagePreview(files[0]);
      }
    });

    certificateImageInput.addEventListener('change', (e) => {
      if (e.target.files.length > 0) {
        handleImagePreview(e.target.files[0]);
      }
    });

    function handleImagePreview(file) {
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = (e) => {
          previewImage.src = e.target.result;
          imagePreview.classList.remove('d-none');
          fileUploadArea.querySelector('p').textContent = 'Rasm muvaffaqiyatli yuklandi';
        };
        reader.readAsDataURL(file);
      }
    }

    // CERTIFICATES MANAGEMENT SYSTEM
    let certificates = JSON.parse(localStorage.getItem('khivaMathCertificates')) || [];

    // Sample initial certificates
    const initialCertificates = [
      { id: 1, name: 'DILNURA', lastName: 'MAMATSAPOYEVA', grade: 'B+', percentage: 92.6, image: 'Dilnura.jpg' },
      { id: 2, name: 'JASURBEK', lastName: 'KARIMOV', grade: 'B+', percentage: 98.77, image: 'Jasurbek.jpg' },
      { id: 3, name: 'TOLIBJON', lastName: '', grade: 'A', percentage: 100, image: 'Tolibjon1.jpg' },
      { id: 4, name: 'ZUHRА', lastName: '', grade: 'C', percentage: 71.94, image: 'Zuhra.jpg' },
      { id: 5, name: 'SHOXZODA', lastName: 'SHANAZAROVA', grade: 'C', percentage: 76.51, image: 'Shaxzoda.jpg' },
      { id: 6, name: 'SHARQIYA', lastName: 'XUSAINBOYEVA', grade: 'B', percentage: 86.72, image: 'Shaqriya.jpg' },
      { id: 7, name: 'TOLIBJON', lastName: '', grade: 'B', percentage: 89.54, image: 'Tolibjon.jpg' },
      { id: 8, name: 'JASURBEK', lastName: 'KARIMOV', grade: 'C', percentage: 75.06, image: 'Jaurbek.jpg' },
      { id: 9, name: 'OTABOY', lastName: 'OTABOYEV', grade: 'C', percentage: 73.08, image: 'Otaboy.jpg' },
      { id: 10, name: 'ZILOLA', lastName: '', grade: 'B+', percentage: 93.78, image: 'zilolab+.jpg' },
      { id: 11, name: 'SHABNAM', lastName: 'ERKINOVA', grade: 'B', percentage: 88.91, image: 'shabnamb.jpg' },
      { id: 12, name: 'MASHHURA', lastName: 'ABDIVAZOVA', grade: 'C+', percentage: 82.78, image: 'mashurac+.jpg' },
      { id: 13, name: 'SHAHZODA', lastName: 'ABDUSHARIPOVA', grade: 'C+', percentage: 79.97, image: 'shahzodac+.jpg' },
      { id: 14, name: 'MOHIRA', lastName: 'YUNUSOVA', grade: 'C+', percentage: 79.22, image: 'mohirac+.jpg' },
      { id: 15, name: 'IRODA', lastName: 'NAZAROVA', grade: 'B+', percentage: 93.31, image: 'irodab+.jpg' },
      { id: 16, name: 'MAFTUNA', lastName: 'O\'TKIROVA', grade: 'B', percentage: 86.46, image: 'maftunab.jpg' }
    ];

    // Initialize certificates if empty
    if (certificates.length === 0) {
      certificates = initialCertificates;
      saveCertificates();
    }

    function saveCertificates() {
      localStorage.setItem('khivaMathCertificates', JSON.stringify(certificates));
    }

    function renderCertificates() {
      const grid = document.getElementById('certificatesGrid');
      const adminList = document.getElementById('adminCertificatesList');
      
      if (grid) {
        grid.innerHTML = certificates.map(cert => `
          <div class="col-12 col-md-6 col-lg-4" data-aos="zoom-in">
            <div class="card certificate-card shadow-sm h-100">
              <div class="position-relative certificate-image-container">
                <img src="${cert.image}" class="certificate-img" alt="${cert.name} ${cert.lastName}" 
                     onerror="this.src='https://via.placeholder.com/400x280/4a9eff/ffffff?text=Certificate'">
                <span class="certificate-badge">${cert.grade}</span>
              </div>
              <div class="card-body">
                <h5 class="card-title">${cert.name} ${cert.lastName}</h5>
                <p class="card-text">
                  <strong>Daraja:</strong> ${cert.grade}<br>
                  <strong>Foiz:</strong> ${cert.percentage}%
                </p>
                <small class="text-muted">Matematika Milliy Sertifikat</small>
              </div>
            </div>
          </div>
        `).join('');
      }

      if (adminList && checkAdminAuth()) {
        adminList.innerHTML = certificates.map(cert => `
          <div class="col-12">
            <div class="card-modern d-flex justify-content-between align-items-center">
              <div class="d-flex align-items-center">
                <img src="${cert.image}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 8px; margin-right: 15px;" 
                     onerror="this.src='https://via.placeholder.com/50x50/4a9eff/ffffff?text=C'">
                <div>
                  <strong>${cert.name} ${cert.lastName}</strong> - ${cert.grade} (${cert.percentage}%)
                </div>
              </div>
              <button class="btn btn-sm btn-outline-danger" onclick="deleteCertificate(${cert.id})">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        `).join('');
      }
    }

    function addCertificate(event) {
      event.preventDefault();
      
      if (!checkAdminAuth()) {
        alert('Iltimos, avval admin sifatida kiring!');
        return;
      }
      
      const fileInput = document.getElementById('certificateImage');
      if (!fileInput.files[0]) {
        alert('Iltimos, sertifikat rasmini yuklang!');
        return;
      }

      const reader = new FileReader();
      reader.onload = (e) => {
        const newCert = {
          id: Date.now(),
          name: document.getElementById('studentName').value,
          lastName: document.getElementById('studentLastName').value,
          grade: document.getElementById('certificateGrade').value,
          percentage: parseFloat(document.getElementById('percentage').value),
          image: e.target.result // Store as base64
        };

        certificates.push(newCert);
        saveCertificates();
        renderCertificates();
        
        document.getElementById('certificateForm').reset();
        imagePreview.classList.add('d-none');
        fileUploadArea.querySelector('p').textContent = 'Rasmni yuklash uchun bosing yoki sudrab keling';
        alert('Sertifikat muvaffaqiyatli qo\'shildi!');
      };
      reader.readAsDataURL(fileInput.files[0]);
    }

    function deleteCertificate(id) {
      if (!checkAdminAuth()) {
        alert('Iltimos, avval admin sifatida kiring!');
        return;
      }

      if (confirm('Haqiqatan ham ushbu sertifikatni o\'chirmoqchimisiz?')) {
        certificates = certificates.filter(cert => cert.id !== id);
        saveCertificates();
        renderCertificates();
      }
    }

    // Event Listeners
    document.getElementById('contactForm').addEventListener('submit', function(e) {
      e.preventDefault();
      alert('Xabaringiz qabul qilindi! Tez orada siz bilan bog\'lanamiz.');
      this.reset();
    });

    document.getElementById('loginForm').addEventListener('submit', loginAdmin);
    document.getElementById('certificateForm').addEventListener('submit', addCertificate);

    // Initial render
    renderCertificates();
    renderYT();
  </script>
</body>
</html>